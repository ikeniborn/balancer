# Ğ‘Ğ°Ğ»Ğ°Ğ½ÑĞ¸Ñ€Ğ¾Ğ²Ñ‰Ğ¸Ğº - Ğ¨Ğ¿Ğ°Ñ€Ğ³Ğ°Ğ»ĞºĞ° Ğ¿Ğ¾ Ñ‚Ğ¸Ğ¿Ğ°Ğ¼ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ

## ğŸ¯ Ğ”ĞµÑ€ĞµĞ²Ğ¾ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğ¹: ĞšĞ°ĞºĞ¾Ğ¹ Ñ‚Ğ¸Ğ¿ Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ?

```
ĞšĞ°ĞºĞ¾Ğ¹ Ñƒ Ğ²Ğ°Ñ ÑĞµÑ€Ğ²Ğ¸Ñ?
â”‚
â”œâ”€ ğŸ”· Backend API (FastAPI, Django, Node.js)?
â”‚  â””â”€ Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ: Backend API (Proxy)
â”‚     ğŸ“ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³: conf.d/proxy/
â”‚     ğŸ“ Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½: service-fastapi.conf.tmpl
â”‚
â”œâ”€ ğŸ¨ Frontend Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ?
â”‚  â”‚
â”‚  â”œâ”€ Ğ¡Ñ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ±Ğ¸Ğ»Ğ´ (npm run build)?
â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€ React / Vue / Angular?
â”‚  â”‚  â”‚  â””â”€ â­ Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ: Frontend Static (Direct Mount)
â”‚  â”‚  â”‚     ğŸ“ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³: conf.d/static/
â”‚  â”‚  â”‚     ğŸ“ Ğ¤Ğ°Ğ¹Ğ»Ñ‹: /static/myapp/
â”‚  â”‚  â”‚     ğŸ“ Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½: service-frontend-static.conf.tmpl
â”‚  â”‚  â”‚     âœ… -50% RAM, Ğ±Ñ‹ÑÑ‚Ñ€ĞµĞµ, Ğ¿Ñ€Ğ¾Ñ‰Ğµ
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ ĞŸÑ€Ğ¾ÑÑ‚Ğ¾ HTML/CSS/JS?
â”‚  â”‚     â””â”€ â­ Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ: Frontend Static (Direct Mount)
â”‚  â”‚
â”‚  â””â”€ SSR Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ (Next.js, Nuxt.js)?
â”‚     â””â”€ Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ: Frontend Container (Proxy)
â”‚        ğŸ“ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³: conf.d/external/
â”‚        ğŸ“ Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½: service-frontend-proxy.conf.tmpl
â”‚
â””â”€ ğŸ—„ï¸ Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…?
   â””â”€ Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ: Database (TCP Stream)
      ğŸ“ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³: conf.d/streams.conf
      ğŸ“ Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½: service-tcp.conf.tmpl
```

---

## ğŸ“Š Ğ¡Ñ€Ğ°Ğ²Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ°

| Ğ’Ğ°Ñˆ ÑĞµÑ€Ğ²Ğ¸Ñ | Ğ¢Ğ¸Ğ¿ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ | ĞšĞ¾Ğ³Ğ´Ğ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ |
|------------|----------------|-------------------|
| **FastAPI** | Backend API (Proxy) | API endpoints, JSON responses |
| **Django REST** | Backend API (Proxy) | API endpoints, admin panel |
| **Node.js API** | Backend API (Proxy) | REST/GraphQL API |
| **React build** | Frontend Static â­ | ĞŸĞ¾ÑĞ»Ğµ npm run build |
| **Vue build** | Frontend Static â­ | ĞŸĞ¾ÑĞ»Ğµ npm run build |
| **Angular dist** | Frontend Static â­ | ĞŸĞ¾ÑĞ»Ğµ ng build |
| **HTML/CSS/JS** | Frontend Static â­ | Ğ¡Ñ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑĞ°Ğ¹Ñ‚ |
| **Next.js SSR** | Frontend Container | Server-side rendering |
| **Nuxt.js SSR** | Frontend Container | Server-side rendering |
| **PostgreSQL** | Database (TCP) | Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… |
| **MySQL** | Database (TCP) | Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… |
| **CouchDB** | Database (TCP) | NoSQL Ğ±Ğ°Ğ·Ğ° |

---

## ğŸš€ ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´

### React Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ

```bash
# 1. Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞµÑ€Ğ²Ğ¸Ñ
sudo bash /opt/balancer/scripts/add-service.sh
# Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ: Frontend Static (2)

# 2. Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹
cd my-react-app
npm run build
rsync -av dist/ user@server:/opt/balancer/static/myapp/

# 3. Ğ˜Ğ»Ğ¸ Ñ‡ĞµÑ€ĞµĞ· ÑĞºÑ€Ğ¸Ğ¿Ñ‚
bash /opt/balancer/scripts/deploy-frontend.sh myapp ./dist

# 4. ĞÑ‚ĞºĞ°Ñ‚ ĞµÑĞ»Ğ¸ Ğ½ÑƒĞ¶Ğ½Ğ¾
bash /opt/balancer/scripts/rollback-frontend.sh myapp previous
```

### FastAPI Backend

```bash
# 1. Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞµÑ€Ğ²Ğ¸Ñ
sudo bash /opt/balancer/scripts/add-service.sh
# Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ: Backend API (1) â†’ FastAPI (1)

# 2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ°
curl https://api.example.ru/docs
```

### PostgreSQL

```bash
# 1. Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞµÑ€Ğ²Ğ¸Ñ
sudo bash /opt/balancer/scripts/add-service.sh
# Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ: Database (4) â†’ PostgreSQL (1)

# 2. ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ
psql -h db.example.ru -p 5432 -U user -d database
```

---

## ğŸ“ Ğ“Ğ´Ğµ Ñ‡Ñ‚Ğ¾ Ğ»ĞµĞ¶Ğ¸Ñ‚

```
/opt/balancer/
â”‚
â”œâ”€â”€ nginx/conf.d/
â”‚   â”œâ”€â”€ proxy/              â† Backend ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³Ğ¸
â”‚   â”‚   â””â”€â”€ api.conf
â”‚   â”‚
â”‚   â”œâ”€â”€ static/             â† Static frontend ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³Ğ¸ â­
â”‚   â”‚   â”œâ”€â”€ myapp.conf
â”‚   â”‚   â””â”€â”€ landing.conf
â”‚   â”‚
â”‚   â”œâ”€â”€ external/           â† Proxy frontend ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³Ğ¸
â”‚   â”‚   â””â”€â”€ nextjs-app.conf
â”‚   â”‚
â”‚   â””â”€â”€ streams.conf        â† Database ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³Ğ¸
â”‚
â”œâ”€â”€ static/                 â† Ğ¡Ñ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ â­
â”‚   â”œâ”€â”€ myapp/             â† React Ğ±Ğ¸Ğ»Ğ´ Ğ·Ğ´ĞµÑÑŒ
â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â”œâ”€â”€ assets/
â”‚   â”‚   â””â”€â”€ .version
â”‚   â””â”€â”€ landing/
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ add-service.sh     â† Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ
â”‚   â”œâ”€â”€ deploy-frontend.sh â† Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ ÑÑ‚Ğ°Ñ‚Ğ¸ĞºĞ¸
â”‚   â””â”€â”€ rollback-frontend.sh â† ĞÑ‚ĞºĞ°Ñ‚
â”‚
â””â”€â”€ deployments/            â† Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ²ĞµÑ€ÑĞ¸Ğ¹
    â””â”€â”€ myapp/
        â”œâ”€â”€ 2025-11-06_10-30-15/
        â””â”€â”€ current â†’ ...
```

---

## ğŸ’¡ ĞšĞ¾Ğ³Ğ´Ğ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Direct Mount?

### âœ… Ğ”Ğ - Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Static Mount:

- [x] React Ğ¿Ğ¾ÑĞ»Ğµ `npm run build`
- [x] Vue Ğ¿Ğ¾ÑĞ»Ğµ `npm run build`
- [x] Angular Ğ¿Ğ¾ÑĞ»Ğµ `ng build`
- [x] Ğ¡Ñ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑĞ°Ğ¹Ñ‚ Ğ½Ğ° HTML/CSS/JS
- [x] Landing page
- [x] Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ (VuePress, Docusaurus)
- [x] Blog Ğ½Ğ° static generator (Hugo, Jekyll)

**ĞŸĞ¾Ñ‡ĞµĞ¼Ñƒ:**
- ĞœĞµĞ½ÑŒÑˆĞµ RAM (1 Nginx Ğ²Ğ¼ĞµÑÑ‚Ğ¾ 2)
- Ğ‘Ñ‹ÑÑ‚Ñ€ĞµĞµ (ÑƒĞ±Ñ€Ğ°Ğ»Ğ¸ Ğ»Ğ¸ÑˆĞ½Ğ¸Ğ¹ Ğ¿Ñ€Ğ¾ĞºÑĞ¸)
- ĞŸÑ€Ğ¾Ñ‰Ğµ Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹ (Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ ÑĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ»Ñ‹)
- ĞœĞ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚ĞºĞ°Ñ‚ (ÑĞ¼ĞµĞ½Ğ° Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ¸)

### âŒ ĞĞ•Ğ¢ - Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Proxy Container:

- [ ] Next.js Ñ SSR
- [ ] Nuxt.js Ñ SSR
- [ ] ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ñ ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğ¼ Nginx ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³Ğ¾Ğ¼
- [ ] ĞšĞ¾Ğ³Ğ´Ğ° Ğ½ÑƒĞ¶Ğ½Ğ° Ğ¿Ğ¾Ğ»Ğ½Ğ°Ñ Ğ¸Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ñ
- [ ] ĞšĞ¾Ğ³Ğ´Ğ° Ğ½ÑƒĞ¶Ğ½Ñ‹ runtime environment variables

---

## âš¡ ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ° Static Mount

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Proxy Container (ÑÑ‚Ğ°Ñ€Ñ‹Ğ¹ ÑĞ¿Ğ¾ÑĞ¾Ğ±)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ RAM:      160 MB (2 ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ° Nginx)   â”‚
â”‚ Latency:  ~8 ms (2 Ğ¿Ñ€Ğ¾ĞºÑĞ¸-ÑĞ»Ğ¾Ñ)         â”‚
â”‚ Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹:   docker build + restart        â”‚
â”‚ ĞÑ‚ĞºĞ°Ñ‚:    docker image rollback         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

VS

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Static Mount (Ğ½Ğ¾Ğ²Ñ‹Ğ¹ ÑĞ¿Ğ¾ÑĞ¾Ğ±) â­          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ RAM:      80 MB (1 Nginx)               â”‚
â”‚ Latency:  ~3 ms (Ğ¿Ñ€ÑĞ¼Ğ°Ñ Ñ€Ğ°Ğ·Ğ´Ğ°Ñ‡Ğ°)        â”‚
â”‚ Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹:   rsync + nginx reload          â”‚
â”‚ ĞÑ‚ĞºĞ°Ñ‚:    ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ¸        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ğ­ĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ: -50% RAM, -60% latency, +100% ÑƒĞ´Ğ¾Ğ±ÑÑ‚Ğ²Ğ¾
```

---

## ğŸ”„ Workflow Ğ´ĞµĞ¿Ğ»Ğ¾Ñ

### Static Mount (Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ Ğ´Ğ»Ñ SPA)

```
1. Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°
   â†“
2. npm run build  
   â†“
3. rsync dist/ â†’ /opt/balancer/static/app/
   â†“
4. nginx -s reload (graceful, Ğ±ĞµĞ· downtime)
   â†“
5. âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾! (~10 ÑĞµĞºÑƒĞ½Ğ´)

ĞÑ‚ĞºĞ°Ñ‚: bash rollback-frontend.sh app previous (Ğ¼Ğ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ¾)
```

### Proxy Container (Ğ´Ğ»Ñ SSR)

```
1. Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°
   â†“
2. docker build
   â†“
3. docker push registry
   â†“
4. docker pull + restart (~2 Ğ¼Ğ¸Ğ½ÑƒÑ‚Ñ‹)
   â†“
5. âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾

ĞÑ‚ĞºĞ°Ñ‚: docker tag previous + restart
```

---

## ğŸ“ Ğ˜Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ±Ğ¾Ñ€

ĞŸÑ€Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑĞºĞµ `add-service.sh` Ğ²Ñ‹ ÑƒĞ²Ğ¸Ğ´Ğ¸Ñ‚Ğµ:

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ ÑĞµÑ€Ğ²Ğ¸ÑĞ°                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  1) Backend API
     â””â”€ FastAPI, Django, Node.js, Ğ´Ñ€ÑƒĞ³Ğ¸Ğµ API

  2) Frontend (Static) â­ Ğ Ğ•ĞšĞĞœĞ•ĞĞ”Ğ£Ğ•Ğ¢Ğ¡Ğ¯
     â””â”€ React, Vue, Angular Ğ±Ğ¸Ğ»Ğ´Ñ‹

  3) Frontend (Container)
     â””â”€ SSR Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ, ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğ¹ Nginx

  4) Database (TCP Stream)
     â””â”€ PostgreSQL, MySQL, CouchDB

Ğ’Ğ°Ñˆ Ğ²Ñ‹Ğ±Ğ¾Ñ€ (1-4):
```

### Ğ”Ğ»Ñ 90% Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´Ğ¾Ğ² Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°Ğ¹Ñ‚Ğµ Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ 2!

---

## ğŸ¯ Ğ§ĞµĞº-Ğ»Ğ¸ÑÑ‚ Ğ¿ĞµÑ€ĞµĞ´ Ğ´ĞµĞ¿Ğ»Ğ¾ĞµĞ¼

### Ğ”Ğ»Ñ Frontend Static:

- [ ] ĞŸÑ€Ğ¾ĞµĞºÑ‚ ÑĞ¾Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ÑÑ Ñ‡ĞµÑ€ĞµĞ· `npm run build`
- [ ] Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ° DNS A-Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€
- [ ] Ğ—Ğ°Ğ¿ÑƒÑ‰ĞµĞ½ `add-service.sh` Ñ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ¾Ğ¼ "Frontend Static"
- [ ] Ğ”Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ `/opt/balancer/static/myapp/` ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ°
- [ ] Ğ‘Ğ¸Ğ»Ğ´ ÑĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½ Ğ² Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ
- [ ] `nginx -s reload` Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½
- [ ] Ğ¡Ğ°Ğ¹Ñ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ Ğ¿Ğ¾ HTTPS
- [ ] SSL ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½

### Ğ”Ğ»Ñ Backend API:

- [ ] ĞšĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½ Ğ¸ Ğ² ÑĞµÑ‚Ğ¸ `proxy_network`
- [ ] Health endpoint Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚
- [ ] Ğ—Ğ°Ğ¿ÑƒÑ‰ĞµĞ½ `add-service.sh` Ñ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ¾Ğ¼ "Backend API"
- [ ] Ğ”Ğ¾Ğ¼ĞµĞ½ Ñ€ĞµĞ·Ğ¾Ğ»Ğ²Ğ¸Ñ‚ÑÑ
- [ ] SSL ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½
- [ ] API Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ Ğ¿Ğ¾ HTTPS

### Ğ”Ğ»Ñ Database:

- [ ] ĞšĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½
- [ ] ĞĞ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ° IP-Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· UFW
- [ ] ĞŸĞ¾Ñ€Ñ‚ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ğ½ÑƒĞ¶Ğ½Ñ‹Ñ… Ğ¿Ğ¾Ğ´ÑĞµÑ‚ĞµĞ¹
- [ ] ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚

---

## ğŸ“ Ğ‘Ñ‹ÑÑ‚Ñ€Ğ°Ñ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒ

### ĞĞµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Static Mount?

```bash
# 1. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ°Ğ²Ğ°
ls -la /opt/balancer/static/myapp/

# 2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³
nginx -t

# 3. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸
tail -f /opt/balancer/logs/nginx/static/myapp-error.log

# 4. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ÑÑ‚ÑŒ
curl -I https://app.example.ru
```

### 502 Bad Gateway?

```bash
# 1. ĞšĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½?
docker ps | grep backend

# 2. Ğ’ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ¹ ÑĞµÑ‚Ğ¸?
docker network inspect proxy_network

# 3. Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ Ğ¸Ğ· Nginx?
docker exec nginx-proxy ping backend-name
```

---

## ğŸ“ ĞĞ±ÑƒÑ‡Ğ°ÑÑ‰Ğ¸Ğµ Ñ€ĞµÑÑƒÑ€ÑÑ‹

**Ğ”Ğ»Ñ Ğ½Ğ¾Ğ²Ğ¸Ñ‡ĞºĞ¾Ğ²:**
1. ĞĞ°Ñ‡Ğ½Ğ¸Ñ‚Ğµ Ñ Frontend Static - ÑÑ‚Ğ¾ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾!
2. ĞŸÑ€Ğ¾Ñ‡Ğ¸Ñ‚Ğ°Ğ¹Ñ‚Ğµ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ĞŸĞ Ğ”
3. Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ `init-balancer.sh`
4. Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğ¹ ÑĞµÑ€Ğ²Ğ¸Ñ

**Ğ”Ğ»Ñ Ğ¾Ğ¿Ñ‹Ñ‚Ğ½Ñ‹Ñ…:**
- Ğ¡Ğ¼Ğ¾Ñ‚Ñ€Ğ¸Ñ‚Ğµ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ‹ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¹
- ĞšĞ°ÑÑ‚Ğ¾Ğ¼Ğ¸Ğ·Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ğ¿Ğ¾Ğ´ ÑĞ²Ğ¾Ğ¸ Ğ½ÑƒĞ¶Ğ´Ñ‹
- Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ²ÑĞµ 4 Ñ‚Ğ¸Ğ¿Ğ° Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ

---

**ğŸ“¥ ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ:** [balancer-prd-complete.md](computer:///mnt/user-data/outputs/balancer-prd-complete.md)
